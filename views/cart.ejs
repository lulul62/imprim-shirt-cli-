<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ImprimShirt</title>
    <link href='https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons' rel="stylesheet"
          type="text/css">
    <link href="https://unpkg.com/vuetify/dist/vuetify.min.css" rel="stylesheet" type="text/css">
    <link href="/stylesheets/style.css" rel="stylesheet" type="text/css">
    <link rel="icon" type="image/png" href="favicon-32x32.png" sizes="32x32">
</head>

<body>
<div id="app">
    <v-app>
        <v-navigation-drawer persistent :mini-variant="miniVariant" :clipped="clipped" v-model="drawer">
            <v-list>
                <v-list-tile v-for="(item, i) in items" :key="i" v-bind:href="item.link" value="true">
                    <v-list-tile-action>
                        <v-icon light v-html="item.icon"></v-icon>
                    </v-list-tile-action>
                    <v-list-tile-content>
                        <v-list-tile-title v-text="item.title"></v-list-tile-title>
                    </v-list-tile-content>
                </v-list-tile>
            </v-list>
        </v-navigation-drawer>
        <v-toolbar>
            <v-toolbar-side-icon @click.native.stop="drawer = !drawer"></v-toolbar-side-icon>

        </v-toolbar>
        <main>
            <v-container fluid style="    position: relative;
    top: 2em;">
                <v-container fluid>
                    <v-slide-y-transition mode="out-in">
                            <template>
                                <div>
                                    <v-stepper v-model="e1">
                                        <v-stepper-header>
                                            <v-stepper-step step="1" :complete="e1 > 1">Validation du panier</v-stepper-step>
                                            <v-divider></v-divider>
                                            <v-stepper-step step="2" :complete="e1 > 2">Vérification des informations de livraison</v-stepper-step>
                                            <v-divider></v-divider>
                                            <v-stepper-step step="3">Paiement</v-stepper-step>
                                        </v-stepper-header>
                                        <v-stepper-content step="1">
                                            <template>
                                                <v-flex xs12 sm12 offset-sm0>
                                                    <v-card>
                                                        <v-toolbar class="primary white--text" dark>
                                                            <v-toolbar-side-icon><v-icon>shopping_cart</v-icon></v-toolbar-side-icon>
                                                            <v-toolbar-title>{{cartTitle}}</v-toolbar-title>
                                                            <v-spacer></v-spacer>

                                                        </v-toolbar>
                                                        <v-list>
                                                            <v-list-group v-for="item in item" :value="item.active"
                                                                          v-bind:key="item.title">
                                                                <v-list-tile slot="item">
                                                                    <v-list-tile-action>
                                                                        <v-icon>{{ item.action }}</v-icon>
                                                                    </v-list-tile-action>
                                                                    <v-list-tile-content>
                                                                        <v-list-tile-title>{{ item.title }}</v-list-tile-title>
                                                                    </v-list-tile-content>
                                                                    <v-list-tile-action>
                                                                        <v-icon>keyboard_arrow_down</v-icon>
                                                                    </v-list-tile-action>
                                                                </v-list-tile>
                                                                <v-list-tile v-for="subItem in item.items"
                                                                             v-bind:key="subItem.title">
                                                                    <v-list-tile-content>
                                                                        <v-list-tile-title>{{ subItem.title }}</v-list-tile-title>
                                                                    </v-list-tile-content>
                                                                    <v-list-tile-action>
                                                                        <v-icon>{{ subItem.action }}</v-icon>
                                                                    </v-list-tile-action>
                                                                </v-list-tile>
                                                            </v-list-group>
                                                        </v-list>
                                                    </v-card>
                                                </v-flex>
                                            </template>
                                            <div v-show="cartTitle !== 'Votre panier est vide :('">
                                            <v-btn primary @click.native="e1 = 2">Étape suivante</v-btn>
                                            <v-btn flat>Annuler</v-btn>
                                            </div>
                                        </v-stepper-content>
                                        <v-stepper-content step="2">
                                            <v-card class="grey lighten-1 z-depth-1 mb-5" height="200px"></v-card>
                                            <v-btn primary @click.native="e1 = 3">Continue</v-btn>
                                            <v-btn flat>Cancel</v-btn>
                                        </v-stepper-content>
                                        <v-stepper-content step="3">
                                            <v-card class="grey lighten-1 z-depth-1 mb-5" height="200px"></v-card>
                                            <v-btn primary @click.native="e1 = 1">Continue</v-btn>
                                            <v-btn flat>Cancel</v-btn>
                                        </v-stepper-content>
                                    </v-stepper>
                                </div>
                            </template>
                    </v-slide-y-transition>
                </v-container>
            </v-container>

        </main>
        <template>
            <v-footer class="pa-3">
                <v-spacer></v-spacer>
                <div>© ImprimShirt {{ new Date().getFullYear() }}</div>
            </v-footer>
        </template>
        <v-snackbar :timeout="timeout" :top="y === 'top'" :bottom="y === 'bottom'" :right="x === 'right'"
                    :left="x === 'left'" :multi-line="mode === 'multi-line'"
                    :vertical="mode === 'vertical'" v-model="showErrorForm">
            Les champs suivants sont manquants : {{ errorForm }}
            <v-btn flat class="pink--text" @click.native="showErrorForm = false">Fermer</v-btn>
        </v-snackbar>

        <v-snackbar :timeout="timeout" :top="y === 'top'" :bottom="y === 'bottom'" :right="x === 'right'"
                    :left="x === 'left'" :multi-line="mode === 'multi-line'"
                    :vertical="mode === 'vertical'" v-model="successUpdate">
            Vos données ont été modifiés avec succés.
            <v-btn flat class="pink--text" @click.native="successUpdate = false">Fermer</v-btn>
        </v-snackbar>
    </v-app>
</div>


<script src="https://unpkg.com/vue/dist/vue.js"></script>
<script src="https://unpkg.com/vuetify/dist/vuetify.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue-resource/1.3.4/vue-resource.min.js"></script>
<script>
    var isConnected = sessionStorage.getItem("dataKey");
    console.log(isConnected);

    if (isConnected === "" || isConnected === null) {
        window.location.href = "/";
    }

    else {
        Vue.component('page', {
            template: '#page'
        })

        var vm = new Vue({
            el: '#app',
            data: {
                clipped: false,
                drawer: true,
                fixed: false,
                baseUrlCurrentUser: "https://transfertprod-668c2.firebaseio.com/user/",
                items: [
                    {icon: "note_add", title: "Personnaliser un produit", link: "/product"},
                    {icon: "shopping_cart", title: "Panier", link: "/cart"},
                    {icon: 'account_circle', title: 'Gestion du profil', link: "/gestionProfil"},
                    {icon: 'shopping_basket', title: 'Suivi des commandes'}
                ],
                item: [],
                currentUser: {},
                y: 'bottom',
                x: null,
                mode: '',
                cartTitle : "Panier",
                timeout: 4000,
                errorArray: [],
                successUpdate: false,
                errorForm: "",
                showErrorForm: false,
                miniVariant: false,
                right: true,
                title: 'ImprimShirt'
            },
            methods: {
                checkEmptyCart : function () {
                    if(vm.item.length === 0){
                        return vm.cartTitle = "Votre panier est vide :("
                    }
                }
            }
        });

    }

    vm.checkEmptyCart();
</script>

</body>

</html>